import{d as U,a3 as v,M as H,n as A,r as I,o as n,j as c,x as o,q as t,F as P,s as G,t as s,f as J,R as T,E as q,L as f,T as E,ab as K,ac as O,P as Q,l as g,ad as W,p as h,w as X,y as Y,V as S}from"./index-25e27c34.js";import{a as B}from"./index-d7741e57.js";import{_ as Z}from"./Countdown.vue_vue_type_style_index_0_lang-f5a2cc7c.js";import"./browser-c9ed2130.js";import"./index-b5bcb5b5.js";const tt={class:"overflow-x-auto mt-4"},et={key:0,class:"table w-full",density:"compact"},st=t("thead",null,[t("tr",null,[t("th",null,"Injected"),t("th",{style:{position:"relative","z-index":"2"}},"Hash"),t("th",null,"Msgs"),t("th",null,"Memo")])],-1),ot={class:"text-sm"},lt={key:0},at={key:0},nt={key:0},ct={key:1,class:"text-center"},it=U({__name:"TxsElement",props:{value:{type:Array}},setup(y){const m=y,i=v(()=>{var d;return((d=m.value)==null?void 0:d.map(p=>{const k=E.fromBase64(p);let a=null,_=!1;try{a=K.decodeTxRaw(E.fromBase64(p))}catch{_=!0}return{hash:O(k),tx:a,injected:_}}))||[]}),$=H(),r=A();return(d,p)=>{const k=I("RouterLink");return n(),c("div",tt,[o(i).length>0?(n(),c("table",et,[st,t("tbody",ot,[(n(!0),c(P,null,G(o(i),a=>(n(),c("tr",null,[t("td",null,s(a.injected),1),t("td",null,[a.injected?(n(),c("span",lt,s(a.hash),1)):(n(),J(k,{key:1,to:`/${o(r).chainName}/tx/${a.hash}`,class:"text-primary dark:invert"},{default:T(()=>[q(s(a.hash),1)]),_:2},1032,["to"]))]),t("td",null,[a.tx?(n(),c("span",at,s(o($).messages(a.tx.body.messages.map(_=>({"@type":_.typeUrl})))),1)):f("",!0)]),t("td",null,[a.tx?(n(),c("span",nt,s(a.tx.body.memo),1)):f("",!0)])]))),256))])])):(n(),c("div",ct,"No Transactions"))])}}}),rt={key:0,class:"text-center"},dt={key:0},ut={class:"text-primary font-bold text-lg my-10"},ht={class:"my-5"},_t={class:"text-xl font-bold"},bt={class:"pt-10 flex justify-center"},mt={class:"table w-max rounded-lg bg-base-100"},pt={class:"text-right"},vt={class:"md:!ml-40"},kt={key:0},ft={colspan:"2",class:"text-center"},xt={class:"text-lg font-bold"},gt={class:"py-4"},yt={class:"join"},$t={class:"text-right"},wt={class:"text-right"},Nt={class:"text-right"},jt={key:1},Bt={class:"bg-base-100 px-4 pt-3 pb-4 rounded mb-4 shadow"},Tt={class:"card-title flex flex-row justify-between"},Ft={class:""},Lt={key:0,class:"flex"},Rt={class:"bg-base-100 px-4 pt-3 pb-4 rounded mb-4 shadow"},Ct={class:"card-title flex flex-row justify-between"},Dt={class:"bg-base-100 px-4 pt-3 pb-4 rounded mb-4 shadow"},Vt={class:"card-title flex flex-row justify-between"},Mt={class:"bg-base-100 px-4 pt-3 pb-4 rounded shadow"},Et={class:"card-title flex flex-row justify-between"},zt=U({__name:"[height]",props:["height","chain"],setup(y){const m=y,i=Q(),$=H(),r=g({}),d=g(Number(m.height||0)),p=v(()=>{var e,l;return Number(((l=(e=r.value.block)==null?void 0:e.header)==null?void 0:l.height)||m.height||0)}),k=v({get:()=>{var u,b;const e=(b=(u=i.latest)==null?void 0:u.block)==null?void 0:b.header.height,l=e?d.value>Number(e):!0;return!l&&!r.value.block_id&&i.fetchBlock(d.value).then(x=>r.value=x),l},set:e=>{console.log(e)}}),a=v(()=>{var l,u;const e=(u=(l=i.latest)==null?void 0:l.block)==null?void 0:u.header.height;return e?Number(d.value)-Number(e):0}),_=v(()=>Number((a.value*i.blocktime).toFixed(2))),F=v(()=>new Date(new Date().getTime()+_.value)),w=g(!1),N=g(m.height);function z(){d.value=Number(N.value),console.log(d.value)}return W(async(e,l,u)=>{l.path!==e.path&&(i.fetchBlock(String(e.params.height)).then(b=>r.value=b),u())}),(e,l)=>{var b,x,L,R,C,D,V,M;const u=I("RouterLink");return n(),c("div",null,[o(k)?(n(),c("div",rt,[o(a)>0?(n(),c("div",dt,[t("div",ut,"#"+s(d.value),1),h(Z,{time:o(_),css:"md:!text-5xl font-sans md:mx-5"},null,8,["time"]),t("div",ht,[q(s(e.$t("block.estimated_time"))+": ",1),t("span",_t,s(o($).toLocaleDate(o(F))),1)]),t("div",bt,[t("table",mt,[t("tbody",null,[t("tr",{class:"hover cursor-pointer",onClick:l[0]||(l[0]=j=>w.value=!w.value)},[t("td",null,s(e.$t("block.countdown_for_block"))+":",1),t("td",pt,[t("span",vt,s(d.value),1)])]),w.value?(n(),c("tr",kt,[t("td",ft,[t("h3",xt,s(e.$t("block.countdown_for_block_input")),1),t("p",gt,[t("div",yt,[X(t("input",{class:"input input-bordered join-item","onUpdate:modelValue":l[1]||(l[1]=j=>N.value=j),type:"number"},null,512),[[Y,N.value]]),t("button",{class:"btn btn-primary join-item",onClick:l[2]||(l[2]=j=>z())},s(e.$t("block.btn_update")),1)])])])])):f("",!0),t("tr",null,[t("td",null,s(e.$t("block.current_height"))+":",1),t("td",$t,"#"+s((x=(b=o(i).latest)==null?void 0:b.block)==null?void 0:x.header.height),1)]),t("tr",null,[t("td",null,s(e.$t("block.remaining_blocks"))+":",1),t("td",wt,s(o(a)),1)]),t("tr",null,[t("td",null,s(e.$t("block.average_block_time"))+":",1),t("td",Nt,s((o(i).blocktime/1e3).toFixed(1))+"s",1)])])])])])):f("",!0)])):(n(),c("div",jt,[t("div",Bt,[t("h2",Tt,[t("p",Ft,"#"+s((R=(L=r.value.block)==null?void 0:L.header)==null?void 0:R.height),1),m.height?(n(),c("div",Lt,[h(u,{to:`/${o(i).blockchain.chainName}/block/${o(p)-1}`,class:"btn btn-primary btn-sm p-1 text-2xl mr-2"},{default:T(()=>[h(o(S),{icon:"mdi-arrow-left",class:"w-full h-full"})]),_:1},8,["to"]),h(u,{to:`/${o(i).blockchain.chainName}/block/${o(p)+1}`,class:"btn btn-primary btn-sm p-1 text-2xl"},{default:T(()=>[h(o(S),{icon:"mdi-arrow-right",class:"w-full h-full"})]),_:1},8,["to"])])):f("",!0)]),t("div",null,[h(B,{value:r.value.block_id},null,8,["value"])])]),t("div",Rt,[t("h2",Ct,s(e.$t("block.block_header")),1),h(B,{value:(C=r.value.block)==null?void 0:C.header},null,8,["value"])]),t("div",Dt,[t("h2",Vt,s(e.$t("account.transactions")),1),h(it,{value:(V=(D=r.value.block)==null?void 0:D.data)==null?void 0:V.txs},null,8,["value"])]),t("div",Mt,[t("h2",Et,s(e.$t("block.last_commit")),1),h(B,{value:(M=r.value.block)==null?void 0:M.last_commit},null,8,["value"])])]))])}}});export{zt as default};
